# 知識補全計畫 - 18 篇系列文章

## 📖 計畫目標

根據 README.md 的**第二部分目標**:
> **知識補全計畫** - 將實作過程中遇到的各種底層概念(如 ECC、CBOR、ASN.1、X.509、OID 等)系統化拆解為系列文章,建立可重用的學習資源。

## 🏗️ 知識架構設計

```
學習進階路線(四層知識結構)
├── 系列一 - 背景層 (第1-5篇)
│   └── 攻擊模型、防護需求、三大機制 → 理解為什麼需要裝置驗證
│
├── 系列二 - 理論層 (第6-8篇)
│   └── ECC、ECDSA、公鑰、信任鏈 → 掌握簽章的數學與安全原理
│
├── 系列三 - 格式層 (第9-15篇) ⭐ 最關鍵
│   └── CBOR、ASN.1、X.509、X9.62、PKCS#7、JWT、WebAuthn
│       → 能解讀 payload、憑證與簽章資料結構
│
└── 系列四 - 實作層 (第16-18篇)
    └── Attestation、Assertion、Receipt
        → 能實作完整的 Apple App Attest 驗證流程
```

## 📚 系列文章規劃

### 📘 系列一:API 安全背景與驗證框架(背景層) - 5篇

**核心目標**: 理解為什麼需要裝置驗證,以及三大機制的定位與概念

- **第 1 篇**:API 攻擊模型與防禦思路
  - 理解 API 面臨的威脅
  - 建立防護思維

- **第 2 篇**:三大驗證機制全景圖
  - reCAPTCHA、Play Integrity、App Attest 總覽
  - 定位差異與適用場景

- **第 3 篇**:Google reCAPTCHA Enterprise 深入解析 ⭐ 新增
  - 風險評分機制
  - Action 概念
  - SMS Defense
  - 動態閾值策略

- **第 4 篇**:Google Play Integrity 深入解析 ⭐ 新增
  - 五大驗證維度
  - 多層次完整性等級
  - Nonce 機制
  - Android 平台特性

- **第 5 篇**:Apple App Attest 深入解析 ⭐ 新增
  - Secure Enclave 硬體信任根
  - 公鑰密碼學架構
  - Apple PKI 憑證鏈
  - 為什麼需要深厚的密碼學知識

### 📙 系列二:密碼學演算法基礎(理論層) - 3篇

**核心目標**: 掌握簽章的數學與安全原理

- **第 6 篇**:ECC 與 ECDSA 原理
  - 橢圓曲線數學基礎
  - ECDSA 簽章演算法
  - P-256 曲線特性

- **第 7 篇**:公開金鑰與信任鏈概念
  - 非對稱加密原理
  - PKI 基礎設施
  - 憑證信任鏈

- **第 8 篇**:數位簽章與驗證應用
  - 簽章的安全特性
  - 驗證流程
  - 實際應用場景

### 📗 系列三:密碼學資料格式與編碼(中介層) - 7篇

**核心目標**: 能解讀 payload、憑證與簽章資料結構

> 💡 **重點提醒**: 這是 App Attest 中最容易卡關的部分

- **系列導讀**:格式分類與學習地圖

- **第 9 篇**:資料序列化與 CBOR
  - CBOR 格式基礎
  - 與 JSON 的差異
  - 解析技巧

- **第 10 篇**:X.509 憑證格式
  - 憑證結構
  - 欄位解析
  - 驗證流程

- **第 11 篇**:ASN.1 與編碼格式
  - ASN.1 語法
  - DER 編碼規則
  - 二進位解析

- **第 12 篇**:X9.62 橢圓曲線公鑰格式
  - X9.62 未壓縮點格式
  - 公鑰點座標結構
  - SPKI 封裝

- **第 13 篇**:PKCS#7 - 簽章資料容器
  - PKCS#7 結構
  - 簽章封裝
  - 多層簽章

- **第 14 篇**:JWT 與 JWS 格式解析
  - JWT 結構
  - JWS 簽章
  - 與 CBOR 的對比

- **第 15 篇**:WebAuthn 與裝置信任模型
  - 傳統驗證的困境
  - WebAuthn 設計理念
  - 協定架構(註冊/認證)
  - ClientData 與 AuthenticatorData 概念
  - Attestation 類型
  - 與 App Attest 的關係

### 📒 系列四:實務應用(協定層) - 3篇

**核心目標**: 理解完整的 Apple App Attest 實作流程

- **第 16 篇**:Apple App Attest - Attestation 註冊流程
  - Attestation Object 完整結構
  - 9 個驗證步驟詳解
  - Nonce 機制與防重放
  - 憑證鏈驗證

- **第 17 篇**:Apple App Attest - Assertion 驗證流程
  - Assertion 資料結構
  - 6 個驗證步驟
  - Counter 防重放機制
  - 與 Attestation 的差異

- **第 18 篇**:Apple App Attest - Receipt 風險評估
  - Receipt 結構解析
  - Risk Metrics 風險分數
  - 實務應用建議

## 📁 資料夾結構

```
知識補全計畫/
├── README.md                           # 📋 總覽與學習路線
├── 系列一_API安全背景與驗證框架/         # 📘 背景層 (5篇)
│   ├── 第1篇_API攻擊模型與防禦思路.md
│   ├── 第2篇_三大驗證機制全景圖.md
│   ├── 第3篇_Google_reCAPTCHA_Enterprise_深入解析.md
│   ├── 第4篇_Google_Play_Integrity_深入解析.md
│   └── 第5篇_Apple_App_Attest_深入解析.md
├── 系列二_密碼學演算法基礎/             # 📙 理論層 (3篇)
│   ├── 第6篇_ECC與ECDSA原理.md
│   ├── 第7篇_公開金鑰與信任鏈概念.md
│   └── 第8篇_數位簽章與驗證應用.md
├── 系列三_密碼學資料格式與編碼/         # 📗 中介層 (導讀+6篇)
│   ├── 系列三導讀_格式分類與學習地圖.md
│   ├── 第9篇_資料序列化與CBOR.md
│   ├── 第10篇_X.509憑證格式.md
│   ├── 第11篇_ASN.1與編碼格式.md
│   ├── 第12篇_X9.62橢圓曲線公鑰格式.md
│   ├── 第13篇_PKCS7-簽章資料容器.md
│   ├── 第14篇_JWT與JWS格式解析.md
│   └── 第15篇_WebAuthn與裝置信任模型.md
└── 系列四_實務應用/                    # 📒 協定層 (3篇)
    ├── 第16篇_Apple_App_Attest-Attestation註冊流程.md
    ├── 第17篇_Apple_App_Attest-Assertion驗證流程.md
    └── 第18篇_Apple_App_Attest-Receipt風險評估.md
```

## 🎯 文章撰寫原則

### 內容深度
- **循序漸進**: 從基礎概念到複雜應用
- **理論結合實務**: 每個概念都搭配實際範例
- **系統化整理**: 避免零散的知識點,建構完整知識體系
- **專注概念**: 避免過多實作細節,著重在「為什麼」和「如何運作」

### 撰寫風格
- **繁體中文**: 保持與專案一致的語言
- **深入淺出**: 複雜概念用易懂的方式解釋
- **圖文並茂**: 適當使用圖表、流程圖、範例

### 目標讀者
- **技術團隊成員**: 需要理解底層原理的開發者
- **安全工程師**: 想深入了解密碼學應用的工程師
- **架構設計師**: 需要設計安全系統的技術負責人

## 🔄 學習建議順序

### 階段一:建立背景知識(系列一 - 第1-5篇)
先理解為什麼需要這些複雜的驗證機制,了解攻擊威脅模型,以及三大驗證機制各自的定位與作用。

### 階段二:掌握數學基礎(系列二 - 第6-8篇)
學習密碼學的數學原理,特別是 ECC 和數位簽章。

### 階段三:解讀資料格式(系列三 - 第9-15篇) ⭐ 重點
這是最關鍵的部分,能夠解讀各種編碼格式是實作的核心技能。建議按順序學習:
- 第9-11篇: 基礎編碼格式(CBOR、X.509、ASN.1)
- 第12-14篇: 進階格式(X9.62、PKCS#7、JWT/JWS)
- 第15篇: WebAuthn 協定設計(App Attest 的基礎)

### 階段四:實務應用整合(系列四 - 第16-18篇)
完整的 Apple App Attest 實作流程:
- 第16篇: Attestation 註冊流程(裝置綁定)
- 第17篇: Assertion 驗證流程(請求驗證)
- 第18篇: Receipt 風險評估(進階風控)

## 📊 預期學習成果

完成這 18 篇文章的學習後,讀者將能夠:

✅ **理解威脅模型** - 知道為什麼需要裝置驗證機制  
✅ **理解三大機制** - 掌握 reCAPTCHA、Play Integrity、App Attest 的定位與概念  
✅ **掌握密碼學原理** - 理解 ECC、ECDSA、信任鏈的運作  
✅ **解讀複雜格式** - 能夠處理 CBOR、ASN.1、X.509、X9.62、PKCS#7 等格式  
✅ **理解協定設計** - 了解 WebAuthn 和 App Attest 的設計理念  
✅ **實作完整流程** - 能實作 Attestation、Assertion、Receipt 三階段驗證  
✅ **排解實務問題** - 具備 debug 和問題分析能力
